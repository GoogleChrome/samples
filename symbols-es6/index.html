<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Symbols (ES6) Sample</title>

    <link rel="stylesheet" href="../styles/main.css">
  </head>
  <body>
    <h1>Symbols (ES6) Sample</h1>
    <p>Available in <a href="http://www.chromestatus.com/feature/6042091272536064">Chrome 38+</a></p>

    <p>
      <code>Symbols</code>, as <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-symbol-objects">described</a>
      in the ES6 draft specification, have a <a href="http://tc39wiki.calculist.org/es6/symbols/">variety of uses</a>.
      This demo illustrates how they can be used to "simulate" private member variables in a class.
      <strong>Note:</strong> While <code>Symbols</code> provide a convenient way to approximate private member variables,
      the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertySymbols"><code>Object.getOwnPropertySymbols()</code></a>
      method makes it possible to obtain the list of <code>Symbols</code> defined for any object. Properties named via
      <code>Symbols</code> can be accessed by making use of this reflection method, meaning the properties are not truly private.
    </p>

    <p>
      The <code>AccessCounter</code> class defined in this page's JavaScript can be used to keep track of the number of
      times a property is accessed via a getter method.
      Each time the <code>value</code> getter is called, an internal counter is incremented.
      Neither the <code>AccessCounter</code>'s value nor the counter are exposed directly
      (though see the previous <strong>Note</strong> about reflection).
    </p>

    <!-- // [START code-block] -->
    <pre id="log"></pre>

    <script>
      // The ValueCounter definition is wrapped in an Immediately-invoked function expression
      // http://en.wikipedia.org/wiki/Immediately-invoked_function_expression
      var AccessCounter = (function() {
        // Neither of these symbols can exist outside of the current scope.
        var valueSymbol = Symbol();
        var accessCountSymbol = Symbol();

        function AccessCounter() {
          this[valueSymbol] = Math.random();
          this[accessCountSymbol] = 0;
        }

        AccessCounter.prototype = {
          get value() {
            this[accessCountSymbol]++;
            return this[valueSymbol];
          },
          get accessCount() {
            return this[accessCountSymbol];
          }
        };

        return AccessCounter;
      })();

      function log() {
        document.querySelector('#log').textContent += Array.prototype.slice.call(arguments).join('') + '\n';
      }

      var accessCounterInstance = new AccessCounter();
      log('AccessCounter created. accessCount is ', accessCounterInstance.accessCount, '.');
      log('value is ', accessCounterInstance.value, '. accessCount is now ', accessCounterInstance.accessCount, '.');
      log('value is still ', accessCounterInstance.value, ', and accessCount is now ', accessCounterInstance.accessCount, '.');
    </script>
    <!-- // [END code-block] -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-53563471-1');
      ga('send', 'pageview');
    </script>
  </body>
</html>
