---
feature_name: WritableStream
chrome_version: 59
feature_id: 5928498656968704
---

<h3>Background</h3>
<p>This sample illustrates the use of <code><a href="https://streams.spec.whatwg.org/#ws">WritableStream</a></code>, which shows how to break apart a longer piece of data and stream it (send it in chunks) to an output.</p>

<p>WritableStreams objects are designed to only be used once. This example creates a new instance every time "Send message" is clicked. The <code>sendMessage()</code> uses that instance to send very byte of the entered message and closes the instance when it is done (<code>defaultWriter.close()</code>).</p>

<p>Data source &gt; writer &gt; sink</p>

<p>The writer is created by the <code>WritableStream</code> object.</p>

<p>If you're familliar at all with streams you may be wondering how backpressure is implemented using this API, especially since the word 'backpressure' doesn't appear as a member of any of the API's interfaces. Three items combine to create a backpressure signal.</p>

<ul>
  <li><em><code>highwatermark</code>:</em> When creating the <code>WritableStream</code> instance, the second property passed to the constructor is a queuing strategy object. This object's constructor takes an object with a <code>highwatermark</code> property whose value species the maximum amount of data that the </code>WritableStream</code> can handle at once.</li>
  <li><em><code>writer.ready</code>: </em>This tells you whether the underlying sink is done writing the data it's received. Check this before adding new data to the pipe <strong>and</strong> before closing the writer.</li> 
  <li><em>The promise returned by <code>write()</code>:</em> The sink's <code>write()</code> method must return a promise. This is used to set <code>writer.ready()</code> to an appropriate value.</li>
</ul>

{% capture initial_output_content %}

<form id="sample-form">
  <div>
    <label for="input">Enter a text message:</label>
    <input id="input" type="text">
    
  </div>
</form>
<button id="sendMessage">Send message</button>
{% endcapture %}
{% include output_helper.html initial_output_content=initial_output_content %}

{% include js_snippet.html filename='demo.js' %}
